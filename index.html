<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>StakeUP Rocket — SURc Staking (enhanced)</title>

  <!-- Tailwind (Play CDN) for prototype / single-file demo -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Chart.js for charts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- QRCode generator -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>

  <!-- Use UMD React builds to avoid ESM/CORS issues that make the app render blank in some environments -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <style>
    html, body, #root { height: 100%; }
    body {
      background: linear-gradient(180deg, #020417 0%, #07122b 50%, #041226 100%);
      color: #ffffff;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .glass {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      backdrop-filter: blur(6px);
    }

    .mono {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
    }

    /* small helper for animations */
    .fade-in { animation: appear .45s ease both; }
    @keyframes appear { from { opacity: 0; transform: translateY(6px) } to { opacity: 1; transform: translateY(0) } }

    /* custom scrollbar for demo */
    ::-webkit-scrollbar { width: 10px; height: 10px; }
    ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.06); border-radius: 10px; }
    ::-webkit-scrollbar-track { background: transparent; }

    /* subtle card hover */
    .card-hover:hover { transform: translateY(-6px); transition: transform 180ms ease; }

    /* small responsive tweaks */
    @media (max-width: 768px) {
      .md\:grid-cols-3 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
    }
  </style>
</head>
<body>
  <div id="root" class="min-h-screen p-6"></div>

  <script>
  (function(){
    const React = window.React;
    const ReactDOM = window.ReactDOM;
    const { useState, useEffect, useRef } = React;

    /*************************************************************************
     * Enhanced StakeUP Rocket — Single-file demo (UMD React)
     * Fixes the blank/blue-screen issue by using UMD React builds and removing
     * fragile ESM imports. Adds a bunch of new marketer/designer/finance/user
     * features while keeping the original visual design.
     **************************************************************************/

    const MANUAL_WALLET = "UQCAZPmfXSp7qnmwNAECen7phkySJZqvZT3qj6WtEAx30oRe";
    const TELEGRAM_CHANNEL = "https://t.me/+z0kf4aAqT4pjYTJi";

    const TOKENS = [
      { id: "ton", name: "Toncoin", symbol: "TON", min: 0.01 },
      { id: "usdt", name: "USDT (on TON)", symbol: "USDT", min: 1 },
      { id: "surc", name: "SURc (StakeUP)", symbol: "SURc", min: 0 }
    ];

    const DURATIONS = [
      { days: 4, label: "4 дня", apyRange: "8% - 10%" },
      { days: 10, label: "10 дней", apyRange: "10% - 14%" },
      { days: 30, label: "30 дней", apyRange: "14% - 18%" },
    ];

    const LS = {
      USER: 'stakeup_user_v_final_enh',
      BAL: 'stakeup_bal_v_final_enh',
      STAKES: 'stakeup_stakes_v_final_enh',
      ADDR: 'stakeup_addr_v_final_enh'
    };

    function read(key, fallback) { try { const v = localStorage.getItem(key); return v ? JSON.parse(v) : fallback; } catch { return fallback; } }
    function write(key, value) { try { localStorage.setItem(key, JSON.stringify(value)); } catch {} }
    function uid() { return Math.random().toString(36).slice(2,10); }
    function short(addr) { if (!addr) return '-'; return addr.slice(0,6) + '...' + addr.slice(-5); }
    function round(n) { return Math.round((n||0) * 1000000) / 1000000; }

    function estimateRewards(amount, apyRange, days) {
      try {
        const parts = apyRange.replace(/%/g,'').split('-').map(p => parseFloat(p));
        const apy = (parts[0] + parts[1]) / 2;
        const daily = apy / 100 / 365;
        const r = amount * daily * days;
        return Number(r.toFixed(6));
      } catch { return 0; }
    }

    /* --- Helpful utilities for the enhanced UI --- */
    function formatCurrency(n, symbol='') {
      try { return Number(n).toLocaleString('ru-RU', { maximumFractionDigits: 6 }) + (symbol ? ' ' + symbol : ''); } catch { return n; }
    }

    /* CSV export */
    function exportCSV(rows, filename = 'stakes.csv'){
      const lines = rows.map(r => Object.values(r).map(v => '"'+String(v).replace(/"/g,'""')+'"').join(','));
      const header = Object.keys(rows[0] || {}).join(',');
      const csv = [header, ...lines].join('\n');
      const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = filename; a.click(); URL.revokeObjectURL(url);
    }

    /* Simple in-app notifications (toast) */
    function useToast() {
      const [msg, setMsg] = useState(null);
      function show(m, ttl=3500){ setMsg(m); setTimeout(()=> setMsg(null), ttl); }
      const node = msg ? React.createElement('div', { className: 'fixed left-1/2 -translate-x-1/2 bottom-8 bg-indigo-600/90 px-4 py-2 rounded-2xl shadow-lg z-50' }, msg) : null;
      return { show, node };
    }

    /* --- App --- */
    function App(){
      // connection stub (TonConnect optional)
      const [connected, setConnected] = useState(!!read(LS.ADDR, null));
      const [addr, setAddr] = useState(read(LS.ADDR, null));

      // stake form
      const [token, setToken] = useState(TOKENS[0]);
      const [amount, setAmount] = useState(5);
      const [duration, setDuration] = useState(DURATIONS[1]);
      const [agree, setAgree] = useState(true);
      const [stage, setStage] = useState('ready'); // ready | paying | manual | staked

      // data
      const [user, setUser] = useState(read(LS.USER, { id: uid(), referer: null, subs: false, email: null }));
      const [balance, setBalance] = useState(read(LS.BAL, { SURc: 0, fromStakes: 0, fromRef: 0, fromSub: 0 }));
      const [stakes, setStakes] = useState(read(LS.STAKES, []));

      const [uiFold, setUiFold] = useState({ faq:false });

      useEffect(()=> write(LS.USER, user), [user]);
      useEffect(()=> write(LS.BAL, balance), [balance]);
      useEffect(()=> write(LS.STAKES, stakes), [stakes]);
      useEffect(()=> write(LS.ADDR, addr), [addr]);

      const toast = useToast();

      function notify(t, ttl){ toast.show(t, ttl); }

      function createStakeRecord({ tokenId, amount, days, from }) {
        const id = uid();
        const started = Date.now();
        const finish = started + days * 24*3600*1000;
        const apy = duration.apyRange;
        const est = estimateRewards(amount, apy, days);
        const stake = { id, tokenId, amount, days, apy, est, started, finish, from, status: 'active' };
        setStakes(prev => [stake, ...prev].slice(0, 500));
        // credit SURc: 10x for external tokens
        const bonus = tokenId !== 'surc' ? (amount * 10) : 0;
        setBalance(prev => ({ ...prev, SURc: round((prev.SURc||0) + bonus), fromStakes: round((prev.fromStakes||0) + bonus) }));
        notify(`Вклад активирован — начислено ${round(bonus)} SURc`);
        return stake;
      }

      async function handlePayAndStake(){
        if (!agree) { notify('Примите условия'); return; }
        if (!amount || Number(amount) <= 0) { notify('Введите корректную сумму'); return; }
        setStage('paying');

        // If internal token SURc - no blockchain transfer
        if (token.id === 'surc') {
          createStakeRecord({ tokenId:'surc', amount:Number(amount), days:duration.days, from:'internal' });
          setStage('staked');
          return;
        }

        // Try to open wallet (this demo only simulates connection). If no wallet, fallback to manual.
        // In production: integrate TonConnect or other RPC here.
        if (connected && addr) {
          // simulate a success with 90% chance
          if (Math.random() < 0.9){
            createStakeRecord({ tokenId: token.id, amount: Number(amount), days: duration.days, from: addr || 'wallet' });
            setStage('staked');
            return;
          } else {
            notify('Оплата через кошелек не удалась — переключаем на ручную оплату');
          }
        }

        setStage('manual');
        notify('Ручная оплата: переведите средства на указанный адрес и подтвердите');
      }

      function confirmManualPaid(){
        createStakeRecord({ tokenId: token.id, amount: Number(amount), days: duration.days, from: 'manual' });
        setStage('staked');
      }

      function applyReferral(code){
        if (!code) { notify('Введите код'); return; }
        if (user.referer) { notify('Реферал уже применён'); return; }
        setUser(prev => ({ ...prev, referer: code }));
        setBalance(prev => ({ ...prev, SURc: (prev.SURc||0) + 100, fromRef: (prev.fromRef||0) + 100 }));
        notify('Реферальный бонус: +100 SURc');
      }

      function applySubscription(){
        if (user.subs) { notify('Уже подписаны'); return; }
        setUser(prev => ({ ...prev, subs: true }));
        setBalance(prev => ({ ...prev, SURc: (prev.SURc||0) + 50, fromSub: (prev.fromSub||0) + 50 }));
        notify('Подписка подтверждена — +50 SURc');
      }

      function timeLeft(finish){
        const diff = finish - Date.now();
        if (diff <= 0) return 'завершено';
        const d = Math.floor(diff / (24*3600*1000));
        const h = Math.floor((diff % (24*3600*1000)) / 3600000);
        const m = Math.floor((diff % 3600000) / 60000);
        return `${d}д ${h}ч ${m}м`;
      }

      // Chart: live preview
      useEffect(()=>{
        const ctx = document.getElementById('growthChart')?.getContext?.('2d');
        if (!ctx) return;
        const labels = Array.from({length: 6}, (_,i) => `T+${i*10}d`);
        const growthRate = 0.02; // fake rate for demo
        const base = Number(amount || 0);
        const data = labels.map((l,i) => round(base * (1 + growthRate * i)));
        if (window._growth_chart_enh) {
          window._growth_chart_enh.data.labels = labels;
          window._growth_chart_enh.data.datasets[0].data = data;
          window._growth_chart_enh.update();
        } else {
          window._growth_chart_enh = new Chart(ctx, {
            type: 'line',
            data: { labels, datasets: [{ label: 'Прогноз роста депозита', data, fill: true, tension: 0.3 }] },
            options: { responsive:true, plugins:{ legend:{ display: false } }, scales:{ y:{ beginAtZero:true } } }
          });
        }
      }, [amount]);

      // referral link & QR
      const refLink = `${window.location.origin}${window.location.pathname}?ref=${user.id}`;
      useEffect(()=>{
        const q = document.getElementById('refQR'); if (q) { QRCode.toCanvas(q, refLink, { width: 120 }); }
      }, [user.id]);

      // reserve pool (10% locked for 100 days) — simple demo calculation
      const totalLocked = stakes.reduce((s, x) => s + (x.amount * 0.1), 0);
      const totalDistributed = balance.fromStakes + (balance.fromRef||0) + (balance.fromSub||0);

      // small auto clean finished stakes (demo)
      useEffect(()=>{
        const t = setInterval(()=>{
          setStakes(prev => prev.map(s=> s.finish <= Date.now() && s.status==='active' ? ({...s, status:'finished'}) : s));
        }, 60000);
        return ()=> clearInterval(t);
      },[]);

      // export sample CSV
      function handleExport(){ if (stakes.length===0) { notify('Нет данных для экспорта'); return; } exportCSV(stakes.map(s=>({ id:s.id, token:s.tokenId, amount:s.amount, days:s.days, status:s.status, est:s.est, from:s.from, finish:new Date(s.finish).toISOString() }))); }

      // Leaderboard (top SURc holders simulated) — simple UX marketing feature
      const leaderboard = useMemo(()=>{
        const base = [ {name:'You', surc: round(balance.SURc||0)} ];
        for(let i=0;i<4;i++) base.push({ name: 'User' + (i+1), surc: Math.round(Math.random()*1000) });
        return base.sort((a,b)=>b.surc-a.surc);
      }, [balance.SURc]);

      return React.createElement('div', { className: 'max-w-7xl mx-auto' },
        // header
        React.createElement('header', { className: 'flex items-center justify-between mb-6' },
          React.createElement('div', null,
            React.createElement('h1', { className: 'text-3xl font-bold tracking-tight' }, 'StakeUP Rocket 🚀'),
            React.createElement('p', { className: 'text-sm text-slate-400' }, 'SURc staking — быстрые депозиты в TON / USDT с красивым UI (enhanced)')
          ),
          React.createElement('div', { className: 'flex items-center gap-4' },
            React.createElement('div', { className: 'text-right' },
              React.createElement('div', { className: 'text-xs text-slate-400' }, 'Баланс SURc'),
              React.createElement('div', { className: 'font-semibold' }, round(balance.SURc||0), ' SURc')
            ),
            connected ? (
              React.createElement('div', { className: 'flex items-center gap-3' },
                React.createElement('div', { className: 'text-sm text-slate-300' }, short(addr || 'wallet')),
                React.createElement('button', { className: 'px-3 py-2 rounded-2xl bg-white/6', onClick: ()=>{ setAddr(null); setConnected(false); notify('Отключено'); } }, 'Отключить')
              )
            ) : (
              React.createElement('div', { className: 'flex gap-2' },
                React.createElement('button', { onClick: ()=>{ setConnected(true); setAddr('EQ' + uid()); notify('Тестовый кошелёк подключен'); }, className: 'px-4 py-2 rounded-2xl bg-gradient-to-r from-indigo-500 to-purple-500 shadow-lg' }, 'Подключить TON (демо)'),
                React.createElement('button', { onClick: ()=> { notify('Ручной режим'); setConnected(false); setAddr(null); }, className: 'px-4 py-2 rounded-2xl bg-white/6' }, 'Ручной')
              )
            )
          )
        ),

        // marketing banner + quick actions
        React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-6 mb-6' },
          React.createElement('div', { className: 'col-span-2 p-4 rounded-2xl bg-gradient-to-r from-[#071428] to-[#061222] border border-white/6 flex items-center justify-between card-hover' },
            React.createElement('div', null,
              React.createElement('h2', { className: 'text-xl font-semibold' }, '🔥 Акция недели: +20% SURc бонус при стейке от 50 TON'),
              React.createElement('p', { className: 'text-sm text-slate-400 mt-1' }, 'Ограниченное предложение — генерация дополнительного интереса и роста удержания пользователей.'),
              React.createElement('div', { className: 'mt-3 flex gap-2' },
                React.createElement('button', { onClick: ()=> notify('Бонус применён (демо) — +20%'), className: 'px-3 py-2 rounded bg-amber-500' }, 'Активировать'),
                React.createElement('button', { onClick: ()=>{ navigator.clipboard?.writeText(refLink); notify('Реферальная ссылка скопирована') }, className: 'px-3 py-2 rounded bg-white/6' }, 'Копировать реф. ссылку')
              )
            ),
            React.createElement('div', { className: 'hidden md:block' },
              React.createElement('canvas', { id: 'bannerChart', width: 200, height: 120 })
            )
          ),

          React.createElement('div', { className: 'p-4 rounded-2xl bg-[#071428]/60 border border-white/6' },
            React.createElement('h3', { className: 'font-semibold' }, 'Quick metrics'),
            React.createElement('div', { className: 'mt-2 text-sm text-slate-400' }, `Locked pool: ${round(totalLocked)} (10% reserve)`),
            React.createElement('div', { className: 'mt-1 text-sm text-slate-400' }, `Distributed SURc (demo): ${round(totalDistributed)}`),
            React.createElement('div', { className: 'mt-3' },
              React.createElement('button', { onClick: ()=> handleExport(), className: 'px-3 py-2 rounded bg-indigo-500' }, 'Экспорт CSV')
            )
          )
        ),

        // main grid
        React.createElement('main', { className: 'grid grid-cols-1 md:grid-cols-3 gap-6' },
          // left - staking panel
          React.createElement('section', { className: 'col-span-2 bg-[#071428]/60 p-6 rounded-2xl glass' },
            React.createElement('div', { className: 'flex items-center justify-between mb-4' },
              React.createElement('h2', { className: 'text-xl font-semibold' }, 'Создать вклад'),
              React.createElement('div', { className: 'text-xs text-slate-400' }, 'SURc — внутренняя монета, в скором листинг')
            ),

            React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-3 mb-4' },
              TOKENS.map(t => React.createElement('button', {
                key:t.id, onClick: ()=> setToken(t),
                className: `p-3 rounded-xl text-left border ${token.id === t.id ? 'border-indigo-400 bg-indigo-900/20' : 'bg-white/2 border-transparent'}`
              }, React.createElement('div',{className:'font-medium'}, t.name), React.createElement('div',{className:'text-xs text-slate-400'}, `Мин: ${t.min} ${t.symbol}`)))
            ),

            React.createElement('div', { className: 'mb-4' },
              React.createElement('label', { className: 'text-sm text-slate-300' }, `Сумма (${token.symbol})`),
              React.createElement('input', {
                className: 'mt-2 w-full rounded-2xl bg-transparent border border-white/6 p-3',
                type: 'number', min:0, step: 'any', value: amount, onChange: e => setAmount(e.target.value)
              })
            ),

            React.createElement('div', { className: 'mb-4' },
              React.createElement('label', { className: 'text-sm text-slate-300' }, 'Срок'),
              React.createElement('div', { className: 'flex gap-3 mt-2' },
                DURATIONS.map(d => React.createElement('button', {
                  key: d.days, onClick: ()=> setDuration(d),
                  className: `px-3 py-2 rounded-lg ${duration.days === d.days ? 'bg-indigo-500/30' : 'bg-white/2'}`
                }, React.createElement('div',{className:'text-sm font-medium'}, d.label), React.createElement('div',{className:'text-xs text-slate-400'}, d.apyRange,' APY')))
              )
            ),

            React.createElement('div', { className: 'mb-4 p-4 rounded-2xl bg-gradient-to-r from-[#071428] to-[#061222] border border-white/6' },
              React.createElement('div', { className: 'flex justify-between items-center mb-2' },
                React.createElement('div', { className: 'text-xs text-slate-400' }, 'Оценка дохода'),
                React.createElement('div', { className: 'text-sm text-slate-200' }, 'APY: ', duration.apyRange)
              ),
              React.createElement('div', { className: 'text-2xl font-semibold' }, `${formatCurrency(amount, token.symbol)}`),
              React.createElement('div', { className: 'text-sm text-slate-400' }, `Ожидаемый доход: ${estimateRewards(Number(amount||0), duration.apyRange, duration.days)} ${token.symbol}`)
            ),

            React.createElement('div', { className: 'mb-4' },
              React.createElement('label', { className: 'text-sm text-slate-300' }, 'Прогноз роста (демо)'),
              React.createElement('canvas', { id: 'growthChart', className: 'mt-2 w-full rounded bg-black/20 p-2' })
            ),

            React.createElement('div', { className: 'flex items-start gap-3 mb-4' },
              React.createElement('input', { id: 'terms', type: 'checkbox', checked: agree, onChange: e => setAgree(e.target.checked) }),
              React.createElement('label', { htmlFor: 'terms', className: 'text-sm text-slate-300' }, 'Я согласен с правилами проекта и понимаю риски.')
            ),

            React.createElement('div', { className: 'flex gap-3 mb-6' },
              React.createElement('button', { onClick: handlePayAndStake, className: 'flex-1 py-3 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-500 font-medium shadow-lg' }, 'Оплатить и активировать'),
              React.createElement('button', { onClick: ()=> { setAmount(0); setAgree(false); notify('Сброшено'); }, className: 'px-4 py-3 rounded-2xl bg-white/6' }, 'Сброс')
            ),

            // flows: manual or staked
            stage === 'manual' && React.createElement('div', { className: 'mt-3 p-4 rounded-xl bg-[#071428]/30 border border-white/6' },
              React.createElement('div', { className: 'text-sm text-slate-300 mb-2' }, 'Переведите сумму вручную на адрес:'),
              React.createElement('div', { className: 'p-3 bg-black/40 rounded mono break-words' }, MANUAL_WALLET),
              React.createElement('div', { className: 'mt-3 flex gap-3' },
                React.createElement('button', { onClick: confirmManualPaid, className: 'px-4 py-2 rounded-2xl bg-green-500' }, 'Я оплатил — подтвердить'),
                React.createElement('button', { onClick: ()=> setStage('ready'), className: 'px-4 py-2 rounded-2xl bg-white/6' }, 'Отмена')
              )
            ),

            stage === 'staked' && React.createElement('div', { className: 'mt-3 p-4 rounded-2xl bg-gradient-to-r from-[#04202d] to-[#041722] border border-white/6' },
              React.createElement('div', { className: 'text-lg font-semibold' }, 'Вклад активирован'),
              React.createElement('div', { className: 'text-sm text-slate-400' }, `Сумма: ${amount} ${token.symbol}`),
              React.createElement('div', { className: 'text-sm text-slate-400' }, `Срок: ${duration.label}`),
              React.createElement('div', { className: 'mt-3' },
                React.createElement('button', { onClick: ()=> { setStage('ready'); setAmount(0); notify('Готово'); }, className: 'px-4 py-2 rounded-2xl bg-indigo-500' }, 'Создать новый вклад')
              )
            )
          ),

          // right - info
          React.createElement('aside', { className: 'col-span-1' },
            // SURc info
            React.createElement('div', { className: 'p-4 rounded-2xl bg-[#071428]/60 border border-white/6 mb-4' },
              React.createElement('h3', { className: 'font-semibold' }, 'SURc — внутренняя монета'),
              React.createElement('div', { className: 'text-sm text-slate-400 mt-2' }, 'SURc — токен экосистемы StakeUP. В скором времени будет листинг на бирже.'),
              React.createElement('div', { className: 'mt-3 text-sm text-slate-300' }, 'Модель распределения:'),
              React.createElement('ul', { className: 'mt-2 text-sm text-slate-400 list-inside list-disc' },
                React.createElement('li', null, '90% — распределяется пользователям (стейки, бонусы).'),
                React.createElement('li', null, '10% — уходит в накопительный резерв на 100 дней для долгосрочных выплат.')
              ),
              React.createElement('div', { className: 'mt-3 p-3 rounded bg-black/30 text-xs text-slate-300' },
                'Пользователи могут заработать до 90% частью эмиссии, 10% блокируется в резерв на 100 дней.'
              )
            ),

            // referral & subscription
            React.createElement('div', { className: 'p-4 rounded-2xl bg-[#071428]/60 border border-white/6 mb-4' },
              React.createElement('h3', { className: 'font-semibold' }, 'Рефералы / Подписка'),
              React.createElement('div', { className: 'text-sm text-slate-400 mt-2' }, 'Код реферала'),
              React.createElement('div', { className: 'flex gap-2 mt-2' },
                React.createElement('input', { id: 'refbox', className: 'flex-1 rounded p-2 bg-transparent border border-white/6', placeholder: 'Код (например: 4n6k)' }),
                React.createElement('button', { onClick: ()=> applyReferral(document.getElementById('refbox')?.value), className: 'px-3 rounded bg-indigo-500' }, 'Применить')
              ),
              React.createElement('div', { className: 'mt-3' },
                React.createElement('button', { onClick: applySubscription, className: 'w-full px-3 py-2 rounded bg-emerald-500' }, 'Подтвердить подписку на канал'),
                React.createElement('a', { className: 'block mt-2 text-xs text-slate-400', href: TELEGRAM_CHANNEL, target: '_blank', rel: 'noreferrer' }, 'Перейти в канал и подписаться')
              ),
              React.createElement('div', { className: 'mt-3 flex items-center gap-3' },
                React.createElement('canvas', { id: 'refQR', width: 120, height: 120 }),
                React.createElement('div', { className: 'text-xs text-slate-400' }, 'Сканируйте QR для приглашений')
              )
            ),

            // history
            React.createElement('div', { className: 'p-4 rounded-2xl bg-[#071428]/60 border border-white/6 mb-4' },
              React.createElement('h3', { className: 'font-semibold' }, 'История вкладов'),
              React.createElement('div', { className: 'mt-2 text-sm text-slate-400' }, 'Последние операции (локальная база)'),
              React.createElement('ul', { className: 'mt-3 space-y-2' },
                stakes.length === 0 ? React.createElement('li', { className: 'text-sm text-slate-400' }, 'История пуста') :
                  stakes.slice(0,6).map(s => React.createElement('li', { key: s.id, className: 'text-sm bg-white/3 p-2 rounded flex flex-col' },
                    React.createElement('div', { className: 'flex justify-between' }, React.createElement('div', null, `${s.amount} ${s.tokenId.toUpperCase()}`), React.createElement('div', { className: 'text-xs text-slate-300' }, `${s.days}д`)),
                    React.createElement('div', { className: 'text-xs text-slate-400 mt-1' }, `Статус: ${s.status}`),
                    React.createElement('div', { className: 'text-xs text-slate-400 mt-1' }, `Оставшееся: ${timeLeft(s.finish)}`)
                  ))
              )
            ),

            // stats SURc
            React.createElement('div', { className: 'p-4 rounded-2xl bg-[#071428]/60 border border-white/6' },
              React.createElement('h3', { className: 'font-semibold' }, 'Статистика SURc'),
              React.createElement('div', { className: 'text-sm text-slate-400 mt-2' }, `Начислено за стейки: ${round(balance.fromStakes||0)} SURc`),
              React.createElement('div', { className: 'text-sm text-slate-400' }, `От рефералов: ${round(balance.fromRef||0)} SURc`),
              React.createElement('div', { className: 'text-sm text-slate-400' }, `За подписки: ${round(balance.fromSub||0)} SURc`),
              React.createElement('div', { className: 'mt-2 text-xs text-slate-300' }, 'Реферальная ссылка:'),
              React.createElement('div', { className: 'mono mt-1 break-words bg-black/20 p-2 rounded text-xs' }, refLink),
              React.createElement('div', { className: 'mt-2 flex gap-2' },
                React.createElement('button', { onClick: ()=> { navigator.clipboard?.writeText(refLink); notify('Скопировано'); }, className: 'px-2 py-1 rounded bg-white/6 text-xs' }, 'Копировать'),
                React.createElement('button', { onClick: ()=> { document.getElementById('refbox').value = user.id; notify('Ваш код в поле реферала') }, className: 'px-2 py-1 rounded bg-indigo-500 text-xs' }, 'Вставить код')
              )
            )
          )
        ),

        // footer
        React.createElement('footer', { className: 'mt-8 text-center text-xs text-slate-500' }, 'StakeUP Rocket — enhanced demo. На продакшне обязательно серверная проверка транзакций.'),

        // toast node
        toast.node
      );
    }

    // Render
    const root = document.getElementById('root');
    ReactDOM.createRoot(root).render(React.createElement(App));

    // small decorative banner chart (non-blocking)
    try{
      const ctx = document.getElementById('bannerChart')?.getContext?.('2d');
      if (ctx) new Chart(ctx, { type:'bar', data:{ labels:['Mon','Tue','Wed','Thu','Fri'], datasets:[{ label:'New stakes', data:[5,7,4,9,6], fill:true, tension:0.3 }] }, options:{ plugins:{ legend:{ display:false } }, scales:{ y:{ beginAtZero:true } } } });
    }catch(e){console.warn(e)}

  })();
  </script>
</body>
</html>
