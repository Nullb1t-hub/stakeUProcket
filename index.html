```html
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>StakeUP Rocket — Web App</title>

  <!-- Tailwind Play CDN (for quick prototype; replace with build-time Tailwind in production) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* small extra polish */
    .glass { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); backdrop-filter: blur(6px); }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace; }
  </style>
</head>
<body class="antialiased bg-gradient-to-b from-[#030416] via-[#07102a] to-[#041226] text-white">

  <div id="root"></div>

  <!-- ESM imports (modern browsers). Uses esm.sh CDN to load React, ReactDOM, Framer Motion and TonConnect SDK. -->
  <script type="module">
    import React, { useEffect, useMemo, useState } from 'https://esm.sh/react@18.2.0';
    import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client';
    import { motion } from 'https://esm.sh/framer-motion@10.12.16';
    import { TonConnect } from 'https://esm.sh/@tonconnect/sdk@1.7.0';

    /******************************************************************
     * Single-file React WebApp for Telegram WebApp (drop into index.html)
     * - Tailwind (play CDN) used for styling (prototype)
     * - TonConnect SDK used via ESM import for wallet connect + send
     * - All logic is client-side demo. For production you MUST verify tx server-side.
     *
     * How to use:
     * - Commit this index.html to your GitHub repo.
     * - Open it in a browser or deploy on Vercel/Netlify and set as Telegram Web App URL.
     *
     * NOTE: This is an integrated, ready-to-run demo. For production:
     * - add server-side transaction verification,
     * - move localStorage state to backend,
     * - secure manifest and origins.
     ******************************************************************/

    const MANUAL_WALLET = "UQCAZPmfXSp7qnmwNAECen7phkySJZqvZT3qj6WtEAx30oRe";
    const TELEGRAM_CHANNEL = "https://t.me/+z0kf4aAqT4pjYTJi";

    const TOKENS = [
      { id: "ton", name: "Toncoin", symbol: "TON", min: 0.01 },
      { id: "usdt", name: "USDT (on TON)", symbol: "USDT", min: 1 },
      { id: "suc", name: "StakeUP Coin", symbol: "SUC", min: 0 }
    ];

    const DURATIONS = [
      { days: 4, label: "4d", apyRange: "8% - 10%" },
      { days: 10, label: "10d", apyRange: "10% - 14%" },
      { days: 30, label: "30d", apyRange: "14% - 18%" },
    ];

    // localStorage keys
    const LS = {
      USER: 'stakeup_user_v1',
      BAL: 'stakeup_balance_v1',
      STAKES: 'stakeup_stakes_v1',
      ADDR: 'stakeup_addr_v1'
    };

    function read(key, fallback) {
      try {
        const v = localStorage.getItem(key);
        return v ? JSON.parse(v) : fallback;
      } catch (e) { return fallback; }
    }
    function write(key, v) {
      try { localStorage.setItem(key, JSON.stringify(v)); } catch(e) {}
    }
    function uid() { return Math.random().toString(36).slice(2,10); }
    function short(a) { if (!a) return '-'; return a.slice(0,6) + '...' + a.slice(-5); }

    function estimateRewards(amount, apyRange, days) {
      try {
        const parts = apyRange.replace(/%/g,'').split('-').map(p => parseFloat(p));
        const apy = (parts[0] + parts[1]) / 2;
        const daily = apy / 100 / 365;
        const r = amount * daily * days;
        return Number(r.toFixed(6));
      } catch (e) { return 0; }
    }

    // Convert TON decimals: TonConnect expects amount as string of decimal TON typically.
    // Here we send as decimal string (SDK will handle).
    // IMPORTANT: Some wallets expect nanoTON uint strings; adapt if needed.

    function App(){
      // Wallet
      const [tonc, setTonc] = useState(null);
      const [connected, setConnected] = useState(!!read(LS.ADDR, null));
      const [addr, setAddr] = useState(read(LS.ADDR, null));

      // UI / staking
      const [token, setToken] = useState(TOKENS[0]);
      const [amount, setAmount] = useState(5);
      const [duration, setDuration] = useState(DURATIONS[1]);
      const [agree, setAgree] = useState(true);
      const [stage, setStage] = useState('ready'); // ready, paying, manual, staked

      // App data
      const [user, setUser] = useState(read(LS.USER, { id: uid(), referer: null, subs: false }));
      const [balance, setBalance] = useState(read(LS.BAL, { SUC: 0 }));
      const [stakes, setStakes] = useState(read(LS.STAKES, []));

      const [notif, setNotif] = useState(null);

      useEffect(() => write(LS.USER, user), [user]);
      useEffect(() => write(LS.BAL, balance), [balance]);
      useEffect(() => write(LS.STAKES, stakes), [stakes]);
      useEffect(() => write(LS.ADDR, addr), [addr]);

      // Notify helper
      function notify(txt, ms = 3500) {
        setNotif(txt);
        setTimeout(()=>setNotif(null), ms);
      }

      // Initialize TonConnect instance (lazy)
      async function initTonConnect() {
        try {
          const ton = new TonConnect({ manifestUrl: window.location.origin + '/manifest.json' });
          setTonc(ton);
          // listen for account update
          ton.onAccountChanged?.((account) => {
            // account might be { address } or null
            if (account?.address) {
              setAddr(account.address);
              setConnected(true);
              notify('Кошелек подключён: ' + short(account.address));
            } else {
              setAddr(null);
              setConnected(false);
            }
          });
          return ton;
        } catch (e) {
          console.warn('TonConnect init failed', e);
          notify('TonConnect инициализация не удалась');
          return null;
        }
      }

      // Connect handler - opens wallet selector & requests connection
      async function handleConnect() {
        try {
          const ton = tonc || await initTonConnect();
          if (!ton) { notify('TonConnect недоступен'); return; }

          const session = await ton.connect(); // opens wallet selector
          // session may contain account info depending on transport
          // TonConnect stores activeAccount in ton.account
          const active = ton?.account || (session?.account) || null;
          if (active?.address) {
            setAddr(active.address);
            setConnected(true);
            notify('Подключено: ' + short(active.address));
          } else {
            // Some transports require explicit get or stored state
            notify('Подключение выполнено (проверьте кошелек).');
            setConnected(true);
          }
        } catch (e) {
          console.error('connect error', e);
          notify('Ошибка подключения: ' + (e?.message || e));
        }
      }

      function handleDisconnect() {
        try {
          tonc?.disconnect?.();
        } catch(e){}
        setAddr(null);
        setConnected(false);
        setTonc(null);
        notify('Отключено');
      }

      // Payment via TonConnect
      async function sendTonPayment(amountDecimal) {
        if (!tonc) {
          notify('TonConnect не инициализирован — инициализируем...');
          await initTonConnect();
        }
        if (!tonc) {
          notify('TonConnect недоступен');
          return { ok: false };
        }
        try {
          // Build messages array for transaction
          // amountDecimal is string or number in TON (decimal)
          const messages = [
            {
              address: MANUAL_WALLET,
              amount: amountDecimal.toString()
              // extra fields (payload) can be added
            }
          ];
          const res = await tonc.sendTransaction({ messages }); // request wallet to send
          // res often contains tx boc or id — in production verify on server
          return { ok: true, res };
        } catch (e) {
          console.error('send error', e);
          return { ok: false, e };
        }
      }

      // finalize stake after confirming payment
      function finalizeStake({ tokenId, amount, durationDays, from }) {
        const idd = uid();
        const created = Date.now();
        const apy = duration.apyRange;
        const est = estimateRewards(amount, apy, durationDays);
        const stake = { id: idd, tokenId, amount, duration: durationDays, apy, est, created, from, status: 'active' };
        setStakes(prev => [stake, ...prev].slice(0,200));
        // credit SUC: 10x of amount for external tokens (TON/USDT), for SUC token credit 0 (or customized)
        const bonus = (tokenId !== 'suc') ? (amount * 10) : 0;
        setBalance(prev => ({ ...prev, SUC: round((prev.SUC||0) + bonus) }));
        notify(`Вклад активирован — начислено ${bonus} SUC`);
      }

      function round(n){ return Math.round((n||0)*1000000)/1000000; }

      // handle full flow: attempt TonConnect payment, fallback to manual
      async function handlePayAndStake() {
        if (!agree) { notify('Примите условия'); return; }
        if (!amount || Number(amount) <= 0) { notify('Введите сумму > 0'); return; }
        setStage('paying');

        // Internal token (SUC) — no on-chain payment required
        if (token.id === 'suc') {
          finalizeStake({ tokenId: 'suc', amount: Number(amount), durationDays: duration.days, from: 'internal' });
          setStage('staked');
          return;
        }

        // If TonConnect available, try programmatic payment
        if (tonc) {
          const a = Number(amount);
          const res = await sendTonPayment(a);
          if (res.ok) {
            // WARNING: In production, verify tx hash BOC or hash server-side before finalizing.
            finalizeStake({ tokenId: token.id, amount: a, durationDays: duration.days, from: addr || 'wallet' });
            setStage('staked');
            return;
          } else {
            notify('Оплата через кошелек не удалась, откройте ручную оплату');
          }
        }

        // fallback: manual transfer
        setStage('manual');
        notify('Режим ручной оплаты — переведите средства на адрес и подтвердите.');
      }

      function confirmManual() {
        finalizeStake({ tokenId: token.id, amount: Number(amount), durationDays: duration.days, from: 'manual' });
        setStage('staked');
      }

      // referral & subscription mock
      function applyReferral(code) {
        if (!code) { notify('Введите код'); return; }
        if (user.referer) { notify('Реферал уже применён'); return; }
        setUser(prev => ({ ...prev, referer: code }));
        setBalance(prev => ({ ...prev, SUC: (prev.SUC||0) + 100 }));
        notify('Реферальный бонус: +100 SUC');
      }
      function applySubscription() {
        if (user.subs) { notify('Подписка уже есть'); return; }
        setUser(prev => ({ ...prev, subs: true }));
        setBalance(prev => ({ ...prev, SUC: (prev.SUC||0) + 50 }));
        notify('Подписка подтверждена — +50 SUC');
      }

      // quick UI small effects
      const est = useMemo(()=> estimateRewards(Number(amount||0), duration.apyRange, duration.days), [amount, duration]);

      return React.createElement('div', { className: 'min-h-screen p-6' },
        React.createElement('div', { className: 'max-w-6xl mx-auto' },
          // header
          React.createElement(motion.header, { initial: { y: -30, opacity: 0 }, animate: { y: 0, opacity: 1 }, className: 'flex items-center justify-between mb-6' },
            React.createElement('div', null,
              React.createElement('h1', { className: 'text-3xl font-bold tracking-tight' }, 'StakeUP Rocket — Staking'),
              React.createElement('p', { className: 'text-sm text-slate-400' }, 'Короткие депозиты TON / USDT — подключение через TonConnect')
            ),
            React.createElement('div', { className: 'flex items-center gap-4' },
              React.createElement('div', { className: 'text-right' },
                React.createElement('div', { className: 'text-xs text-slate-400' }, 'Баланс SUC'),
                React.createElement('div', { className: 'font-semibold' }, round(balance.SUC || 0), ' SUC')
              ),
              connected ? React.createElement('div', { className: 'flex items-center gap-3' },
                React.createElement('div', { className: 'text-sm text-slate-300' }, short(addr || 'wallet')),
                React.createElement('button', { onClick: handleDisconnect, className: 'px-3 py-2 rounded-2xl bg-white/6' }, 'Отключить')
              ) :
              React.createElement('div', { className: 'flex gap-2' },
                React.createElement('button', { onClick: handleConnect, className: 'px-4 py-2 rounded-2xl bg-gradient-to-r from-indigo-500 to-purple-500 shadow-lg' }, 'Подключить TON'),
                React.createElement('button', { onClick: ()=> { setConnected(false); setAddr(null); notify('Ручной режим'); }, className: 'px-4 py-2 rounded-2xl bg-white/6' }, 'Ручной')
              )
            )
          ),

          // main
          React.createElement('main', { className: 'grid grid-cols-1 md:grid-cols-3 gap-6' },
            // left big panel
            React.createElement(motion.section, { initial: { x: -20, opacity: 0 }, animate: { x: 0, opacity: 1 }, className: 'col-span-2 bg-[#071428]/50 p-6 rounded-2xl shadow-xl' },
              React.createElement('h2', { className: 'text-xl font-semibold mb-4' }, 'Создать вклад'),

              // token selection
              React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-3 mb-4' },
                TOKENS.map(t => React.createElement('button', {
                  key: t.id,
                  onClick: ()=> setToken(t),
                  className: `p-3 rounded-xl text-left border ${token.id===t.id ? 'border-indigo-400 bg-indigo-900/20' : 'bg-white/2 border-transparent'}`
                },
                  React.createElement('div', { className: 'font-medium' }, t.name),
                  React.createElement('div', { className: 'text-xs text-slate-400' }, `Мин: ${t.min} ${t.symbol}`)
                ))
              ),

              // amount
              React.createElement('div', { className: 'mb-4' },
                React.createElement('label', { className: 'text-sm text-slate-300' }, `Сумма (${token.symbol})`),
                React.createElement('input', {
                  type: 'number',
                  min: 0,
                  step: 'any',
                  value: amount,
                  onChange: (e)=> setAmount(e.target.value),
                  className: 'mt-2 w-full rounded-2xl bg-transparent border border-white/6 p-3'
                })
              ),

              // duration
              React.createElement('div', { className: 'mb-4' },
                React.createElement('label', { className: 'text-sm text-slate-300' }, 'Срок'),
                React.createElement('div', { className: 'flex gap-3 mt-2' },
                  DURATIONS.map(d => React.createElement('button', {
                    key: d.days,
                    onClick: ()=> setDuration(d),
                    className: `px-3 py-2 rounded-lg ${duration.days===d.days ? 'bg-indigo-500/30' : 'bg-white/2'}`
                  },
                    React.createElement('div', { className: 'text-sm font-medium' }, d.label),
                    React.createElement('div', { className: 'text-xs text-slate-400' }, d.apyRange, ' APY')
                  ))
                )
              ),

              // estimate
              React.createElement('div', { className: 'mb-4 p-4 rounded-2xl bg-gradient-to-r from-[#071428] to-[#061222] border border-white/6' },
                React.createElement('div', { className: 'flex justify-between items-center mb-2' },
                  React.createElement('div', { className: 'text-xs text-slate-400' }, 'Оценка дохода'),
                  React.createElement('div', { className: 'text-sm text-slate-200' }, 'APY: ', duration.apyRange)
                ),
                React.createElement('div', { className: 'text-2xl font-semibold' }, `${amount} ${token.symbol}`),
                React.createElement('div', { className: 'text-sm text-slate-400' }, `Ожидаемый доход: ${est} ${token.symbol}`)
              ),

              // terms
              React.createElement('div', { className: 'flex items-start gap-3 mb-4' },
                React.createElement('input', { id: 'terms', type: 'checkbox', checked: agree, onChange: (e)=> setAgree(e.target.checked) }),
                React.createElement('label', { htmlFor: 'terms', className: 'text-sm text-slate-300' }, 'Я согласен с правилами. Понимаю риски.')
              ),

              // actions
              React.createElement('div', { className: 'flex gap-3' },
                React.createElement('button', { onClick: handlePayAndStake, className: 'flex-1 py-3 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-500 font-medium shadow-lg' }, 'Оплатить и активировать'),
                React.createElement('button', { onClick: ()=> { setAmount(0); setAgree(false); notify('Сброшено'); }, className: 'px-4 py-3 rounded-2xl bg-white/6' }, 'Сброс')
              ),

              // flows
              stage === 'manual' && React.createElement(motion.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, className: 'mt-5 p-4 rounded-xl bg-[#071428]/30 border border-white/6' },
                React.createElement('div', { className: 'text-sm text-slate-300 mb-2' }, 'Переведите сумму на этот адрес вручную:'),
                React.createElement('div', { className: 'p-3 bg-black/40 rounded mono break-words' }, MANUAL_WALLET),
                React.createElement('div', { className: 'mt-3 flex gap-3' },
                  React.createElement('button', { onClick: confirmManual, className: 'px-4 py-2 rounded-2xl bg-green-500' }, 'Я оплатил — подтвердить'),
                  React.createElement('button', { onClick: ()=> { setStage('ready'); }, className: 'px-4 py-2 rounded-2xl bg-white/6' }, 'Отмена')
                )
              ),

              stage === 'staked' && React.createElement(motion.div, { initial: { scale: 0.98, opacity: 0 }, animate: { scale: 1, opacity: 1 }, className: 'mt-5 p-4 rounded-2xl bg-gradient-to-r from-[#04202d] to-[#041722] border border-white/6' },
                React.createElement('div', { className: 'text-lg font-semibold' }, 'Вклад активирован'),
                React.createElement('div', { className: 'text-sm text-slate-400' }, `Сумма: ${amount} ${token.symbol}`),
                React.createElement('div', { className: 'text-sm text-slate-400' }, `Срок: ${duration.label}`),
                React.createElement('div', { className: 'mt-3' },
                  React.createElement('button', { onClick: ()=> { setStage('ready'); setAmount(0); notify('Готово'); }, className: 'px-4 py-2 rounded-2xl bg-indigo-500' }, 'Создать новый вклад')
                )
              )
            ),

            // right sidebar
            React.createElement(motion.aside, { initial: { x: 20, opacity: 0 }, animate: { x: 0, opacity: 1 }, className: 'col-span-1' },
              React.createElement('div', { className: 'p-4 rounded-2xl bg-[#071428]/60 border border-white/6 mb-4' },
                React.createElement('h3', { className: 'font-semibold' }, 'Статус'),
                React.createElement('div', { className: 'text-sm text-slate-400 mt-2' }, stage === 'ready' ? 'Готов к оплате' : stage === 'paying' ? 'Идёт оплата...' : stage === 'manual' ? 'Ожидание ручного платежа' : 'Вклад активен')
              ),

              React.createElement('div', { className: 'p-4 rounded-2xl bg-[#071428]/60 border border-white/6 mb-4' },
                React.createElement('h3', { className: 'font-semibold' }, 'Анимация'),
                React.createElement('div', { className: 'mt-3 flex justify-center' },
                  React.createElement(motion.div, { animate: { rotate: 360 }, transition: { repeat: Infinity, duration: 8 }, className: 'w-28 h-28 rounded-full bg-gradient-to-br from-indigo-500 to-pink-500/60 flex items-center justify-center shadow-2xl' },
                    React.createElement('div', { className: 'text-sm font-bold' }, 'ROCKET')
                  )
                )
              ),

              React.createElement('div', { className: 'p-4 rounded-2xl bg-[#071428]/60 border border-white/6 mb-4' },
                React.createElement('h3', { className: 'font-semibold' }, 'Рефералы / Подписка'),
                React.createElement('div', { className: 'text-sm text-slate-400 mt-2' }, 'Код реферального партнёра'),
                React.createElement('div', { className: 'flex gap-2 mt-2' },
                  React.createElement('input', { id: 'refcode', className: 'flex-1 rounded p-2 bg-transparent border border-white/6', placeholder: 'Код (например: 4n6k)' }),
                  React.createElement('button', { onClick: ()=> applyReferral(document.getElementById('refcode')?.value), className: 'px-3 rounded bg-indigo-500' }, 'Применить')
                ),
                React.createElement('div', { className: 'mt-3' },
                  React.createElement('button', { onClick: applySubscription, className: 'w-full px-3 py-2 rounded bg-emerald-500' }, 'Подтвердить подписку на канал'),
                  React.createElement('a', { className: 'block mt-2 text-xs text-slate-400', href: TELEGRAM_CHANNEL, target: '_blank', rel: 'noreferrer' }, 'Перейти в канал и подписаться')
                )
              ),

              React.createElement('div', { className: 'p-4 rounded-2xl bg-[#071428]/60 border border-white/6' },
                React.createElement('h3', { className: 'font-semibold' }, 'История'),
                React.createElement('div', { className: 'mt-2 text-sm text-slate-400' }, 'Последние вклады'),
                React.createElement('ul', { className: 'mt-3 space-y-2' },
                  stakes.length === 0 ? React.createElement('li', { className: 'text-sm text-slate-400' }, 'История пуста') :
                  stakes.slice(0,5).map(s => React.createElement('li', { key: s.id, className: 'text-sm bg-white/3 p-2 rounded flex justify-between' },
                    React.createElement('div', null, `${s.amount} ${s.tokenId.toUpperCase()}`),
                    React.createElement('div', { className: 'text-xs text-slate-300' }, `${s.duration}d`)
                  ))
                )
              )
            )
          ),

          React.createElement('footer', { className: 'mt-8 text-center text-xs text-slate-500' }, 'StakeUP Rocket — демонстрация. Для продакшна: серверная проверка транзакций и безопасность.'),

          notif && React.createElement('div', { className: 'fixed left-1/2 -translate-x-1/2 bottom-8 bg-indigo-600/90 px-4 py-2 rounded-2xl shadow-lg' }, notif)
        )
      );
    }

    // mount
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(App));
  </script>
</body>
</html>
```
